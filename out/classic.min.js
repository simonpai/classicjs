!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.classic=n()}(this,function(){var e=function(e,n,t){Object.defineProperty(this,e,{enumerable:t||null==t,value:n})},n=function(n,t){var r="function"==typeof t;return function(){var i=Array.prototype.slice.call(arguments);i.unshift(null);var o,u=new(n.bind.apply(n,i)),f=Object.create(u);f.finalize=e,o=(r?t.apply(f,arguments):t)||{},delete f.finalize;for(var a in o)f[a]=o[a];return Object.defineProperty(f,"super",{get:function(){return u}}),f}},t=n(Array,function(e){if(Array.isArray(e))for(var n=0,t=e.length;t>n;n++)this.push(e[n]);Object.defineProperty(this,"isEmpty",{get:function(){return 0==this.length}}),Object.defineProperty(this,"first",{get:function(){return this[0]}}),Object.defineProperty(this,"last",{get:function(){return this[this.length-1]}});var r=function(e){if("number"!=typeof e)throw"Index must be a number or null "+e;if(0>e||e>this.length)throw"Index out of bound: "+e+", length: "+this.length};return{contains:function(e){return!!this.indexOf(e)},add:function(e,n){null==n&&this.push(e),r(n),this.splice(n,0,e)},remove:function(e){var n=this.indexOf(e);return 0>n?!1:(this.splice(n,1),!0)},removeAt:function(e){r(e);var n=this[e];return this.splice(e,1),n}}}),r=n(Object,function(e){var n=e||{};return Object.defineProperty(this,"isEmpty",{get:function(){return 0==Object.getOwnPropertyNames(n).length}}),{get:function(e,t){var r=n[e];return void 0===r&&null!=t&&(n[e]=r="function"==typeof t?t():t),r},put:function(e,t){n[e]=t},remove:function(e){var t=n[e];return delete n[e],t},clear:function(){n={}},keys:function(){var e=new t;for(var r in n)e.push(r);return e},values:function(){var e=new t;for(var r in n)e.push(n[r]);return e},forEach:function(e){for(var t in n)e(t,n[t])}}}),i=n(Object,function(e){var n={},t=function(e){n[e]=1};if(e)if(Array.isArray(e))e.forEach(t);else for(var r in e)t(r);return Object.defineProperty(this,"isEmpty",{get:function(){return 0==Object.getOwnPropertyNames(n).length}}),{contains:function(e){return!!n[e]},add:t,remove:function(e){var t=this.contains(e);return delete n[e],t},clear:function(){n={}},forEach:function(e){for(var t in n)e(t)}}}),o=n(Object,function(){var e,n=function(n,i){return null==e&&(e=new r),e.get(n,function(){return new t}).push(i),this},i=function(n,t){if(e){if(!t)return void e.remove(n);var r=e.get(n);if(r)return r.remove(t),r.isEmpty&&e.remove(n),this}},o=function(e,n,t){if(Array.isArray(n))return void n.forEach(function(n){e(n,t)});if(null!=t);else if(r.isTypeOf(n))n.forEach(e);else for(var i in n)e(i,n[i])};return{on:function(e,t){return o(n,e,t),this},off:function(e,n){return o(i,e,n),this},trigger:function(n,t){if(e){var r=e.get(n);if(r)return r.forEach(function(e){e(t)}),this}}}}),u=function(e){return null==e?new t:t.isTypeOf(e)?e:new t(Array.isArray(e)?e:[e])},f=n(o,function(e){var n=u(e);return Object.defineProperty(this,"internal",{get:function(){return n}}),{load:function(e,t){n=u(e),trigger("load",{name:"load",data:n,source:t})},update:function(e,t){var r=n.indexOf(e);0>r||trigger("update",{name:"update",data:e,index:r,source:t})},add:function(e,n,t){"number"!=typeof n&&null!=t&&(t=n,n=null),this._add(e,n),trigger("add",{name:"add",data:e,index:n,source:t})},_add:function(e,t){n.add(e,t)},remove:function(e,t){var r=n.indexOf(e);0>r||(this._remove(e),trigger("remove",{name:"remove",data:e,index:r,source:t}))},_remove:function(e){n.remove(e)}}}),a=n(Object,function(e,n){e&&Array.isArray(e)&&e.length&&(e=e[0]),e&&(this.element=e),n&&(this.model=n)}),c=function(){},s=function(e,n){if(null==e)return null;n=n||{};var t=Array.isArray(n.in)&&n.in,r=Array.isArray(n.ex)&&new i(n.ex),o=n.tar||{};return(t||Object.keys(e)).forEach(function(n){r&&r.contains(n)||(o[n]=e[n])}),o},d=n(function(e,n){return new a(e,n||new f)},function(e,n,t){var r=this.model,i=function(e){r&&r[e](this._listeners)};i("on"),Object.defineProperty(this,"model",{get:function(){return r},set:function(e){i("off"),r=e,i("on")}}),this.renderer=t;var o={create:function(e){var n=document.createElement("div");return n._item=e,n},update:function(e,n){e.innerHTML=""+n},show:c,hide:c},u=function(e){return this.renderer&&this.renderer[e]||o[e]};return{_listeners:_clonePlainObject({load:function(e){this.load(e.data,e.source)},update:function(e){this.update(e.item,e.index,e.source)},add:function(e){this.add(e.item,e.index,e.source)},remove:function(e){this.remove(e.item,e.index,e.source)}}),clear:function(){this.element.innerHTML=""},load:function(e){if(this.clear(),null!=e&&Array.isArray(e)){var n=u.create,t=u.update,r=u.show,i=this.element;e.forEach(function(e){var o=n(e,this);t(o,e,this),i.appendChild(o),r(o,e,this)})}},update:function(e,n){var t=this.element.children[n];u.update(t,e,this)},add:function(e,n){var t=u.create(e,this),r=this.element.children[n];u.update(t,e,this),this.element.insertBefore(t,r),u.show(t,e,this)},remove:function(e,n){var t=this.element.children[n];null!=t&&(u.hide(t,e,this),this.element.removeChild(t))}}});return{extend:n,List:t,Map:r,Set:i,Model:o,ListModel:f,View:a,ListView:d,u:{"void":c,copy:s}}});