!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.classic=t()}(this,function(){var e=function(){};e.prototype.class=e;var t=function(t){t.extend=e.extend,t.mixin=e.mixin,t.isTypeOf=e.isTypeOf};e.extend=function(e){var n="function"==typeof e,r=this,i=n?Object.create(this.prototype):new this,o=function(){var t=this,i=e;if(n){var o="super"in t,u=o?t.super:null;t.super=function(){r.apply(t,arguments)},i=e.apply(t,arguments),o?t.super=u:delete t.super}for(var s in i||{})this[s]=i[s]};return o.prototype=i,o.prototype.class=o.prototype.constructor=o,o.super=this,t(o),o},e.isTypeOf=function(e){for(var t=e.class;t;t=t.super)if(t===this)return!0;return!1},e.mixin=function(e){return this.extend(e.prototype)};var n=e.extend.call(Array,function(e){if(this.super(),Array.isArray(e))for(var t=0,n=e.length;n>t;t++)this.push(e[t]);Object.defineProperty(this,"isEmpty",{get:function(){return 0==this.length}}),Object.defineProperty(this,"first",{get:function(){return this[0]}}),Object.defineProperty(this,"last",{get:function(){return this[this.length-1]}});var r=function(e){if("number"!=typeof e)throw"Index must be a number or null "+e;if(0>e||e>this.length)throw"Index out of bound: "+e+", length: "+this.length};return{contains:function(e){return!!this.indexOf(e)},add:function(e,t){null==t&&this.push(e),r(t),this.splice(t,0,e)},remove:function(e){var t=this.indexOf(e);return 0>t?!1:(this.splice(t,1),!0)},removeAt:function(e){r(e);var t=this[e];return this.splice(e,1),t}}}),r=e.extend(function(e){var t=e||{};return Object.defineProperty(this,"isEmpty",{get:function(){return 0==Object.getOwnPropertyNames(t).length}}),{get:function(e,n){var r=t[e];return void 0===r&&null!=n&&(t[e]=r="function"==typeof n?n():n),r},put:function(e,n){t[e]=n},remove:function(e){var n=t[e];return delete t[e],n},clear:function(){t={}},keys:function(){var e=new n;for(var r in t)e.push(r);return e},values:function(){var e=new n;for(var r in t)e.push(t[r]);return e},forEach:function(e){for(var n in t)e(n,t[n])}}}),i=e.extend(function(e){var t={},n=function(e){t[e]=1};if(e)if(Array.isArray(e))e.forEach(n);else for(var r in e)n(r);return Object.defineProperty(this,"isEmpty",{get:function(){return 0==Object.getOwnPropertyNames(t).length}}),{contains:function(e){return!!t[e]},add:n,remove:function(e){var n=this.contains(e);return delete t[e],n},clear:function(){t={}},forEach:function(e){for(var n in t)e(n)}}}),o=e.extend(function(){var e,t=function(t,i){return null==e&&(e=new r),e.get(t,function(){return new n}).push(i),this},i=function(t,n){if(e){if(!n)return void e.remove(t);var r=e.get(t);if(r)return r.remove(n),r.isEmpty&&e.remove(t),this}},o=function(e,t,n){if(Array.isArray(t))return void t.forEach(function(t){e(t,n)});if(null!=n);else if(r.isTypeOf(t))t.forEach(e);else for(var i in t)e(i,t[i])};return{on:function(e,n){return o(t,e,n),this},off:function(e,t){return o(i,e,t),this},trigger:function(t,n){if(e){var r=e.get(t);if(r)return r.forEach(function(e){e(n)}),this}}}}),u=function(e){return null==e?new n:n.isTypeOf(e)?e:new n(Array.isArray(e)?e:[e])},s=o.extend(function(e){this.super();var t=u(e);return Object.defineProperty(this,"internal",{get:function(){return t}}),{load:function(e,n){t=u(e),trigger("load",{name:"load",data:t,source:n})},update:function(e,n){var r=t.indexOf(e);0>r||trigger("update",{name:"update",data:e,index:r,source:n})},add:function(e,t,n){"number"!=typeof t&&null!=n&&(n=t,t=null),this._add(e,t),trigger("add",{name:"add",data:e,index:t,source:n})},_add:function(e,n){t.add(e,n)},remove:function(e,n){var r=t.indexOf(e);0>r||(this._remove(e),trigger("remove",{name:"remove",data:e,index:r,source:n}))},_remove:function(e){t.remove(e)}}}),f=e.extend(function(e,t){e&&Array.isArray(e)&&e.length&&(e=e[0]),e&&(this.element=e),t&&(this.model=t)}),a=function(){},c=function(e,t){if(null==e)return null;t=t||{};var n=Array.isArray(t.in)&&t.in,r=Array.isArray(t.ex)&&new i(t.ex),o=t.tar||{};return(n||Object.keys(e)).forEach(function(t){r&&r.contains(t)||(o[t]=e[t])}),o},d=f.extend(function(e,t,n){var r=t||new s,i=function(e){r&&r[e](this._listeners)};Object.defineProperty(this,"model",{get:function(){return r},set:function(e){i("off"),r=e,i("on")}}),this.super(e,t),this.renderer=n;var o={create:function(e){var t=document.createElement("div");return t._item=e,t},update:function(e,t){e.innerHTML=""+t},show:a,hide:a},u=function(e){return this.renderer&&this.renderer[e]||o[e]};return{_listeners:_clonePlainObject({load:function(e){this.load(e.data,e.source)},update:function(e){this.update(e.item,e.index,e.source)},add:function(e){this.add(e.item,e.index,e.source)},remove:function(e){this.remove(e.item,e.index,e.source)}}),clear:function(){this.element.innerHTML=""},load:function(e){if(this.clear(),null!=e&&Array.isArray(e)){var t=u.create,n=u.update,r=u.show,i=this.element;e.forEach(function(e){var o=t(e,this);n(o,e,this),i.appendChild(o),r(o,e,this)})}},update:function(e,t){var n=this.element.children[t];u.update(n,e,this)},add:function(e,t){var n=u.create(e,this),r=this.element.children[t];u.update(n,e,this),this.element.insertBefore(n,r),u.show(n,e,this)},remove:function(e,t){var n=this.element.children[t];null!=n&&(u.hide(n,e,this),this.element.removeChild(n))}}});return{Class:e,List:n,Map:r,Set:i,Model:o,ListModel:s,View:f,ListView:d,u:{"void":a,simpleClone:c}}});