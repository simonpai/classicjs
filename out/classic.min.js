!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.classic=n()}(this,function(){var e=function(e,n){var t="function"==typeof n;return function(){var r=Array.prototype.slice.call(arguments);r.unshift(null);var i=new(e.bind.apply(e,r)),o=Object.create(i),u=(t?n.apply(o,arguments):n)||{};for(var f in u)o[f]=u[f];return Object.defineProperty(o,"super",{get:function(){return i}}),o}},n=e(Array,function(e){if(Array.isArray(e))for(var n=0,t=e.length;t>n;n++)this.push(e[n]);Object.defineProperty(this,"isEmpty",{get:function(){return 0==this.length}}),Object.defineProperty(this,"first",{get:function(){return this[0]}}),Object.defineProperty(this,"last",{get:function(){return this[this.length-1]}});var r=function(e){if("number"!=typeof e)throw"Index must be a number or null "+e;if(0>e||e>this.length)throw"Index out of bound: "+e+", length: "+this.length};return{contains:function(e){return!!this.indexOf(e)},add:function(e,n){null==n&&this.push(e),r(n),this.splice(n,0,e)},remove:function(e){var n=this.indexOf(e);return 0>n?!1:(this.splice(n,1),!0)},removeAt:function(e){r(e);var n=this[e];return this.splice(e,1),n}}}),t=e(Object,function(e){var t=e||{};return Object.defineProperty(this,"isEmpty",{get:function(){return 0==Object.getOwnPropertyNames(t).length}}),{get:function(e,n){var r=t[e];return void 0===r&&null!=n&&(t[e]=r="function"==typeof n?n():n),r},put:function(e,n){t[e]=n},remove:function(e){var n=t[e];return delete t[e],n},clear:function(){t={}},keys:function(){var e=new n;for(var r in t)e.push(r);return e},values:function(){var e=new n;for(var r in t)e.push(t[r]);return e},forEach:function(e){for(var n in t)e(n,t[n])}}}),r=e(Object,function(e){var n={},t=function(e){n[e]=1};if(e)if(Array.isArray(e))e.forEach(t);else for(var r in e)t(r);return Object.defineProperty(this,"isEmpty",{get:function(){return 0==Object.getOwnPropertyNames(n).length}}),{contains:function(e){return!!n[e]},add:t,remove:function(e){var t=this.contains(e);return delete n[e],t},clear:function(){n={}},forEach:function(e){for(var t in n)e(t)}}}),i=e(Object,function(){var e,r=function(r,i){return null==e&&(e=new t),e.get(r,function(){return new n}).push(i),this},i=function(n,t){if(e){if(!t)return void e.remove(n);var r=e.get(n);if(r)return r.remove(t),r.isEmpty&&e.remove(n),this}},o=function(e,n,r){if(Array.isArray(n))return void n.forEach(function(n){e(n,r)});if(null!=r);else if(t.isTypeOf(n))n.forEach(e);else for(var i in n)e(i,n[i])};return{on:function(e,n){return o(r,e,n),this},off:function(e,n){return o(i,e,n),this},trigger:function(n,t){if(e){var r=e.get(n);if(r)return r.forEach(function(e){e(t)}),this}}}}),o=function(e){return null==e?new n:n.isTypeOf(e)?e:new n(Array.isArray(e)?e:[e])},u=e(i,function(e){var n=o(e);return Object.defineProperty(this,"internal",{get:function(){return n}}),{load:function(e,t){n=o(e),trigger("load",{name:"load",data:n,source:t})},update:function(e,t){var r=n.indexOf(e);0>r||trigger("update",{name:"update",data:e,index:r,source:t})},add:function(e,n,t){"number"!=typeof n&&null!=t&&(t=n,n=null),this._add(e,n),trigger("add",{name:"add",data:e,index:n,source:t})},_add:function(e,t){n.add(e,t)},remove:function(e,t){var r=n.indexOf(e);0>r||(this._remove(e),trigger("remove",{name:"remove",data:e,index:r,source:t}))},_remove:function(e){n.remove(e)}}}),f=e(Object,function(e,n){e&&Array.isArray(e)&&e.length&&(e=e[0]),e&&(this.element=e),n&&(this.model=n)}),a=function(){},c=function(e,n){if(null==e)return null;n=n||{};var t=Array.isArray(n.in)&&n.in,i=Array.isArray(n.ex)&&new r(n.ex),o=n.tar||{};return(t||Object.keys(e)).forEach(function(n){i&&i.contains(n)||(o[n]=e[n])}),o},s=e(function(e,n){return new f(e,n||new u)},function(e,n,t){var r=this.model,i=function(e){r&&r[e](this._listeners)};i("on"),Object.defineProperty(this,"model",{get:function(){return r},set:function(e){i("off"),r=e,i("on")}}),this.renderer=t;var o={create:function(e){var n=document.createElement("div");return n._item=e,n},update:function(e,n){e.innerHTML=""+n},show:a,hide:a},u=function(e){return this.renderer&&this.renderer[e]||o[e]};return{_listeners:_clonePlainObject({load:function(e){this.load(e.data,e.source)},update:function(e){this.update(e.item,e.index,e.source)},add:function(e){this.add(e.item,e.index,e.source)},remove:function(e){this.remove(e.item,e.index,e.source)}}),clear:function(){this.element.innerHTML=""},load:function(e){if(this.clear(),null!=e&&Array.isArray(e)){var n=u.create,t=u.update,r=u.show,i=this.element;e.forEach(function(e){var o=n(e,this);t(o,e,this),i.appendChild(o),r(o,e,this)})}},update:function(e,n){var t=this.element.children[n];u.update(t,e,this)},add:function(e,n){var t=u.create(e,this),r=this.element.children[n];u.update(t,e,this),this.element.insertBefore(t,r),u.show(t,e,this)},remove:function(e,n){var t=this.element.children[n];null!=t&&(u.hide(t,e,this),this.element.removeChild(t))}}});return{extend:e,List:n,Map:t,Set:r,Model:i,ListModel:u,View:f,ListView:s,u:{"void":a,simpleClone:c}}});